"use strict";(()=>{var e={};e.id=356,e.ids=[356],e.modules={2518:e=>{e.exports=require("mongodb")},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6762:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},6768:(e,t,n)=>{n.r(t),n.d(t,{config:()=>p,default:()=>l,routeModule:()=>P});var o={};n.r(o),n.d(o,{default:()=>d});var r=n(9947),i=n(2706),s=n(6762),a=n(2518);let u=process.env.MONGO_URI;async function d(e,t){let n=new a.MongoClient(u);await n.connect();let o=n.db("tripcost").collection("expenses");if("POST"===e.method){let{trip:n,date:r,amount:i,category:s,description:a}=e.body,u=await o.insertOne({trip:n,date:r,amount:i,category:s,description:a});t.status(200).json({ok:!0,result:u})}else if("GET"===e.method){let{trip:n}=e.query,r=await o.find({trip:n}).toArray();t.status(200).json({expenses:r})}else t.status(405).json({error:"Method not allowed"});n.close()}let l=(0,s.M)(o,"default"),p=(0,s.M)(o,"config"),P=new r.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/expenses",pathname:"/api/expenses",bundlePath:"",filename:""},userland:o})},2706:(e,t)=>{var n;Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE"}(n||(n={}))},9947:(e,t,n)=>{e.exports=n(5600)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=6768);module.exports=n})();